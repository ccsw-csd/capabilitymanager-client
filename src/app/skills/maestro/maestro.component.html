<p-progressSpinner *ngIf="!load" class="flex justify-content-center mt-5"></p-progressSpinner>


<div *ngIf="load">
  <div class="flex justify-content-between">
    <h3>INFORMES</h3>
    <div class="my-2 mr-4 flex justify-content-end">

      <!-- SELECCIONAR SI ES SCREENSHOT -->
      <p-dropdown [options]="screenshotsOptions" class="m-2" [style]="{'width': '210px'}"
        [(ngModel)]="selectedScreenshot" optionLabel="name" [showClear]="false" placeholder="Versión Screenshot">
      </p-dropdown>

      <!-- SELECCIONAR AÑO -->
      <p-dropdown [options]="reportYears" class="m-2" [style]="{'width': '210px'}" [(ngModel)]="selectedReportYear"
        [showClear]="false" placeholder="Seleccione un Año">
      </p-dropdown>

      <!-- SELECCIONAR VERSION -->
      <p-dropdown [options]="reportVersions" class="m-2" [style]="{'width': '240px'}"
        [(ngModel)]="selectedReportVersion" optionLabel="descripcion" [showClear]="false"
        placeholder="Seleccione una versión">
      </p-dropdown>

      <button pButton type="button" pRipple icon="pi pi-search" class="p-button-outlined m-2" (click)="searchVersion()"
        style="width: 80px;"></button>

      <!-- BOTON DE EXPORTAR SI TIENE PERMISOS "EXPORTAR" -->
      <button *ngIf="authService.hasRole('EXPORTAR')" type="button" pButton pRipple icon="pi pi-file-excel"
        class="p-button-outlined m-2" (click)="menu.toggle($event)" style="width: 80px;">
        <i class="pi pi-angle-down m-2"></i>
      </button>

      <p-menu #menu [popup]="true" [model]="items"></p-menu>

    </div>
  </div>

  <div class="flex flex-column lg:flex-row">
    <div class="card my-3" style="margin-right: 2%;">
      <app-table-detail [data]="EMData" [columnas]="EMCol" [text]="EMText"></app-table-detail>
    </div>
    <div class="card my-3">
      <app-table-detail [data]="BAData" [columnas]="BACol" [text]="BAText"></app-table-detail>
    </div>
  </div>

  <div class="flex flex-column lg:flex-row">
    <div class="card my-3" style="margin-right: 2%;">
      <app-table-detail [data]="ARData" [columnas]="ARCol" [text]="ARText"></app-table-detail>
    </div>
    <div class="card my-3">
      <app-table-detail [data]="SEData" [columnas]="SECol" [text]="SEText"></app-table-detail>
    </div>
  </div>

  <div class="py-3">
    <app-table-detail [data]="IEData" [columnas]="IECol" [text]="IEText"></app-table-detail>
  </div>

  <!-- Specific Zoom -->
  <h3 class="card my-3">SPECIFIC ZOOM</h3>
  <div class="card py-3">
    <app-table-detail [data]="ArSeDevData" [columnas]="ArSeDevCol" [text]="ArSeDevText"
      [extraHeader]="true"></app-table-detail>
  </div>

  <div class="my-2">
    <app-table-detail [data]="ArSeApiData" [columnas]="ArSeApiCol" [text]="ArSeApiText"></app-table-detail>
  </div>

  <!-- Pyramide -->
  <h3 class="card mt-4">PYRAMID</h3>
  <div class="card py-2">
    <app-table-detail [data]="gradesRoles" [columnas]="rolesCol" [text]="gradeRoleText"></app-table-detail>
  </div>

  <p-divider></p-divider>

  <!-- Switch screenshot-->
  <div class="flex items-center ml-2 mt-4">
    <div class="small-input-switch">
      <p-inputSwitch [(ngModel)]="foo" (onChange)="foo" label="Screenshot"></p-inputSwitch>
    </div>
    <span style="margin-left: 0.5rem;">Screenshot</span>
  </div>

  <!-- Comentarios-->
  <div class="py-3 mt-2 flex">
    <span class="p-float-label">
      <textarea id="float-input" rows="10" cols="140" pInputTextarea></textarea>
      <label for="float-input">Comentarios</label>
    </span>
  </div>
  <div class="flex">
    <button pButton pRipple styleClass="" label="Guardar" icon="pi pi-save"
      class="p-button p-button-primary p-button-outlined mt-2" (click)="foo()">
    </button>
  </div>
</div>

<!-- Dialog exports -->
<p-dialog header="Selecciona tu lista:" [(visible)]="visible" [style]="{width: '50vw'}" [closable]="false">
  <div class="flex flex-column ml-5">
    <div *ngFor="let elem of tableList" class="field-checkbox">
      <p-radioButton [inputId]="elem" name="category" [value]="elem" [(ngModel)]="selectedExcel"></p-radioButton>
      <label [for]="elem" class="ml-2">{{ elem }}</label>
    </div>
  </div>

  <div class="flex flex-row mt-5 gap-3 justify-content-end gap-2">
    <button pButton pRipple styleClass="" label="Cancelar" class="p-button p-button-secondary p-button-outlined"
      (click)="closeDialog()"></button>
    <button pButton pRipple p-button-label="10px" label="Exportar" [disabled]="selectedExcel==''"
      (click)="exportExcel()"></button>
  </div>
</p-dialog>